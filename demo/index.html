<html>

<head>
  <script type="text/javascript" src="../../webcomponentsjs/webcomponents-lite.js"></script>
  <link rel="import" href="../iron-grid.html">
</head>

<body>
  <style>
    iron-grid div.first {
      color: blue;
    }
  </style>

  <iron-grid style="width: 800px;margin-bottom: 50px;">
    <grid-column name="First Name">
      <template>
        <div class="first">[[item.name.first]]</div>
      </template>
    </grid-column>
    <grid-column name="Last Name">
      <template>[[item.name.last]]</template>
    </grid-column>
    <grid-column name="Email">
      <template>[[item.email]]</template>
    </grid-column>
  </iron-grid>

  <iron-grid id="lazy" style="width: 800px;margin-bottom: 50px">
    <grid-column name="First Name">
      <template>[[item.user.name.first]]
      </template>
    </grid-column>
    <grid-column name="Last Name">
      <template>[[item.user.name.last]]</template>
    </grid-column>
    <grid-column name="Email">
      <template>[[item.user.email]]</template>
    </grid-column>
  </iron-grid>

  <style>
    #max > div {
      width: 100%;
    }

    #max div.pic {
      display: flex;
      justify-content: center;
    }

    #max img {
      height: 24px;
      width: 24px;
    }
  </style>

  <iron-grid id="max" style="width: 800px">
    <grid-column>
      <template>
        <div class="pic">
          <img src="[[item.user.picture.medium]]" />
        </div>
      </template>
    </grid-column>
    <grid-column name="First Name">
      <template>[[item.user.name.first]]
      </template>
    </grid-column>
    <grid-column name="Last Name">
      <template>[[item.user.name.last]]</template>
    </grid-column>
    <grid-column name="Email">
      <template>[[item.user.email]]</template>
    </grid-column>
  </iron-grid>

  <script>
  var users;
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function() {
    if (xhr.readyState == XMLHttpRequest.DONE) {
      if (xhr.status == 200) {
        var json = JSON.parse(xhr.responseText);
        users = json.results;
      }
    }
  };

  xhr.open("GET", 'users.json', true);
  xhr.send();

    document.addEventListener('WebComponentsReady', function() {

      var lazygrid = document.querySelector('#lazy');
      lazygrid.size = users.length;
      lazygrid.lazyItems = function(index, count) {
        return users.slice(index, index + count);
      };

      var maxgrid = document.querySelector('#max');
      maxgrid.size = 100000;
      maxgrid.lazyItems = function(index, count) {
        return users.slice(0, count);
      };

      var grid = document.querySelector('iron-grid');

      grid.items = [{
          name: {
            first: 'amber',
            last: 'crawford'
          },
          email: 'amber.crawford@example.com'
      }, {
          name: {
            first: 'zoe',
            last: 'caldwell'
          },
          email: 'zoe.caldwell@example.com'
      }, {
          name: {
            first: 'jessie',
            last: 'brooks'
          },
          email: 'jessie.brooks@example.com'
      },{
          name: {
            first: 'amber',
            last: 'crawford'
          },
          email: 'amber.crawford@example.com'
      }, {
          name: {
            first: 'zoe',
            last: 'caldwell'
          },
          email: 'zoe.caldwell@example.com'
      }, {
          name: {
            first: 'jessie',
            last: 'brooks'
          },
          email: 'jessie.brooks@example.com'
      },{
          name: {
            first: 'amber',
            last: 'crawford'
          },
          email: 'amber.crawford@example.com'
      }, {
          name: {
            first: 'zoe',
            last: 'caldwell'
          },
          email: 'zoe.caldwell@example.com'
      }, {
          name: {
            first: 'jessie',
            last: 'brooks'
          },
          email: 'jessie.brooks@example.com'
      },{
          name: {
            first: 'amber',
            last: 'crawford'
          },
          email: 'amber.crawford@example.com'
      }, {
          name: {
            first: 'zoe',
            last: 'caldwell'
          },
          email: 'zoe.caldwell@example.com'
      }, {
          name: {
            first: 'jessie',
            last: 'brooks'
          },
          email: 'jessie.brooks@example.com'
      },{
          name: {
            first: 'amber',
            last: 'crawford'
          },
          email: 'amber.crawford@example.com'
      }, {
          name: {
            first: 'zoe',
            last: 'caldwell'
          },
          email: 'zoe.caldwell@example.com'
      }, {
          name: {
            first: 'jessie',
            last: 'brooks'
          },
          email: 'jessie.brooks@example.com'
      },{
          name: {
            first: 'amber',
            last: 'crawford'
          },
          email: 'amber.crawford@example.com'
      }, {
          name: {
            first: 'zoe',
            last: 'caldwell'
          },
          email: 'zoe.caldwell@example.com'
      }, {
          name: {
            first: 'jessie',
            last: 'brooks'
          },
          email: 'jessie.brooks@example.com'
      },{
          name: {
            first: 'amber',
            last: 'crawford'
          },
          email: 'amber.crawford@example.com'
      }, {
          name: {
            first: 'zoe',
            last: 'caldwell'
          },
          email: 'zoe.caldwell@example.com'
      }, {
          name: {
            first: 'jessie',
            last: 'brooks'
          },
          email: 'jessie.brooks@example.com'
      }];
    });
  </script>
</body>

</html>
